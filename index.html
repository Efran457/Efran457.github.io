<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Fun - Snake</title>
<style>
body {
  background-color: #32C5FF;
  font-family: Arial, sans-serif;
  overflow: hidden; /* verhindert Scrollbars */
  margin: 0;
}

#apple {
  width: 50px;
  height: 50px;
  background-color: green;
  position: absolute;
  border-radius: 50%;
}

#wurfel {
  width: 50px;
  height: 50px;
  background-color: lightblue;
  position: absolute;
  top: 200px;
  left: 200px;
}

p {
  background-color: #2599C7;
  font-size: 18px;
  padding: 10px;
  border-radius: 8px;
  color: white;
  position: fixed;
  top: 10px;
  left: 10px;
  margin: 0;
}
  button {
    background-color: #2599C7;
    color: white;
    font-size: 18px;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    top: 10px;
    right: 10px;
  }
  button:hover {
    background-color: #1E7CA0;
  }
</style>
</head>
<body>
<div id="wurfel"></div>
<div id="apple"></div>
<p id="points">Punkte: 0</p>

<script>
const wurfel = document.getElementById("wurfel");
const apple = document.getElementById("apple");
const pointsDisplay = document.getElementById("points");

let wurfelx = 200;
let wurfely = 200;
let speed = 5;
let dirX = 0;
let dirY = 0;
let score = 0;

function applePosReset() {
  const lavax = Math.random() * (window.innerWidth - 50);
  const lavay = Math.random() * (window.innerHeight - 50);
  apple.style.left = lavax + "px";
  apple.style.top = lavay + "px";
  score++;
  pointsDisplay.textContent = "Punkte: " + score;
}

applePosReset();

document.addEventListener("keydown", (e) => {
  if (e.key === "w" && dirY === 0) { dirX = 0; dirY = -1; }
  if (e.key === "s" && dirY === 0) { dirX = 0; dirY = 1; }
  if (e.key === "a" && dirX === 0) { dirX = -1; dirY = 0; }
  if (e.key === "d" && dirX === 0) { dirX = 1; dirY = 0; }
});

function loop() {
  wurfelx += dirX * speed;
  wurfely += dirY * speed;

  // keep cube inside the screen
  wurfelx = Math.max(0, Math.min(window.innerWidth - 50, wurfelx));
  wurfely = Math.max(0, Math.min(window.innerHeight - 50, wurfely));

  wurfel.style.left = wurfelx + "px";
  wurfel.style.top = wurfely + "px";

  const wurfelRect = wurfel.getBoundingClientRect();
  const appleRect = apple.getBoundingClientRect();

  if (checkCollision(wurfelRect, appleRect)) {
    applePosReset();
  }

  requestAnimationFrame(loop);
}

function checkCollision(rect1, rect2) {
  return !(
    rect1.right < rect2.left ||
    rect1.left > rect2.right ||
    rect1.bottom < rect2.top ||
    rect1.top > rect2.bottom
  );
}

loop();
</script>
</body>
</html>
